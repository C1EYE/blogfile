---

title: å„ç±»æ’åº
date: 2021-04-28 21:29:00
tags: ç®—æ³•
category: ç®—æ³•å­¦ä¹ 
---

![image-20210515200024075](https://raw.githubusercontent.com/C1EYE/figureBed/main/img/20210515200024.png)
<!-- more -->



# é¦–å…ˆè®¤è¯†ä¸€ä¸‹åå¤§æ’åºç®—æ³•



![image-20210515200024075](https://raw.githubusercontent.com/C1EYE/figureBed/main/img/20210515200024.png)



- å†’æ³¡ï¼Œé€‰æ‹©ï¼Œæ’å…¥ï¼Œå½’å¹¶ï¼Œå¿«æ’ï¼Œå¸Œå°”ï¼Œå †æ’åºå±äºæ¯”è¾ƒæ’åº

###  å‡†å¤‡å·¥ä½œ

åœ¨å¼€å§‹ä»‹ç»æ’åºç®—æ³•ä¹‹å‰ï¼Œé¦–å…ˆå…ˆè®¾è®¡ä¸€ä¸‹æ¥å£ï¼Œæ–¹ä¾¿è¿›è¡Œæ€§èƒ½æµ‹è¯•å’ŒéªŒè¯æ­£ç¡®æ€§ã€‚

è¿™é‡Œä½¿ç”¨Javaä¸­çš„æŠ½è±¡ç±»æ¥ç»Ÿä¸€æ¥å£ï¼Œç•™å‡ºæŠ½è±¡sortæ–¹æ³•ç»™å­ç±»å®ç°ã€‚



```java
 protected Integer[] array;
    private int cmpCount = 0;


    private int swapCount = 0;
    private long time;
    private DecimalFormat fmt = new DecimalFormat("#.00");

    protected abstract void sort();

    public void sort(Integer[] array) {
        if (array == null || array.length < 2) {
            return;
        }
        this.array = array;
        time = System.currentTimeMillis();
        sort();
        time = System.currentTimeMillis() - time;
    }


    /**
     * ä¼ å…¥ä¸¤ä¸ªç´¢å¼•
     * ç›¸ç­‰è¿”å›0
     * a>bè¿”å›æ­£æ•°
     * a<bè¿”å›è´Ÿæ•°
     *
     * @param a
     * @param b
     * @return
     */
    protected int cmp(int a, int b) {
        cmpCount++;
        return array[a] - array[b];
    }

    protected int cmpElement(Integer a, Integer b) {
        cmpCount++;
        return a.compareTo(b);
    }

    protected void swap(int a, int b) {
        swapCount++;
        int temp = array[a];
        array[a] = array[b];
        array[b] = temp;
    }

    private String numberString(int number) {
        if (number < 10000) {
            return "" + number;
        }

        if (number < 100000000) {
            return fmt.format(number / 10000.0) + "ä¸‡";
        }
        return fmt.format(number / 100000000.0) + "äº¿";
    }

    @Override
    public String toString() {
        String timeStr = "è€—æ—¶ï¼š" + (time / 1000.0) + "s(" + time + "ms)";
        String compareCountStr = "æ¯”è¾ƒï¼š" + numberString(cmpCount);
        String swapCountStr = "äº¤æ¢ï¼š" + numberString(swapCount);
//        String stableStr = "ç¨³å®šæ€§ï¼š" + isStable();
        return "ã€" + getClass().getSimpleName() + "ã€‘\n"
//                + stableStr + " \t"
                + timeStr + " \t"
                + compareCountStr + "\t "
                + swapCountStr + "\n"
                + "------------------------------------------------------------------";

    }

    @Override
    public int compareTo(Sort o) {
        int result = (int) (this.time - o.time);
        if (result != 0) {
            return result;
        }
        result = this.cmpCount - o.cmpCount;
        if (result != 0) {
            return result;
        }
        return this.swapCount - o.swapCount;

    }

```





# åŸºäºæ¯”è¾ƒçš„æ’åº



> è®©æˆ‘ä»¬ä»æœ€ç®€å•çš„å†’æ³¡æ’åºå¼€å§‹



## å†’æ³¡æ’åº

1. éå†ç›¸é‚»ä¸¤ä½ï¼Œæ ¹æ®æ¯”è¾ƒè§„åˆ™å†³å®šæ˜¯å¦äº¤æ¢
2. æ¯æ¬¡éå†éƒ½ä¼šå®Œæˆä¸€ä½æ’åºï¼Œå› æ­¤ä¸‹æ¬¡å¼€å§‹æ—¶å¯ä»¥åç§»ä¸€ä½è¿›è¡Œæ¯”è¾ƒ
3. éå†æ•°ç»„é•¿åº¦-1æ¬¡ä¹‹åæ’åºå®Œæˆ
4. æ˜¾ç„¶å¦‚æœä¸€æ¬¡éå†æ²¡æœ‰äº¤æ¢ä»£è¡¨æ’åºå·²ç»å®Œæˆï¼Œè¿™æ—¶å¯ä»¥æå‰ç»“æŸå¾ªç¯

```java
public class BubbleSort extends Sort{
    @Override
    protected void sort() {
        for (int i = 0; i < array.length - 1; i++) {

            boolean flag = true;
            for (int j = i; j < array.length; j++) {

                if (cmp(i,j)>0) {
                    int temp = array[i];
                    array[i] = array[j];
                    array[j] = temp;
                    flag = false;
                }
            }
            if (flag) {
                break;
            }
        }
    }
}
```

| æœ€å¥½ |  æœ€å  |  å¹³å‡  | é¢å¤–ç©ºé—´å¤æ‚åº¦ | In-place | ç¨³å®šæ€§ |
| :--: | :----: | :----: | :------------: | :------: | :----: |
| O(n) | O(n^2) | O(n^2) |      O(1)      |    âˆš     |   âˆš    |



#### æ’åºç®—æ³•çš„ç¨³å®šæ€§

> è¿™é‡Œå¼•å…¥æ’åºç®—æ³•çš„ç¨³å®šæ€§è¿™ä¸ªæ¦‚å¿µ

- å¦‚æœç›¸ç­‰çš„2ä¸ªå…ƒç´ ï¼Œåœ¨æ’åºå‰åçš„ç›¸å¯¹ä½ç½®ä¿æŒä¸å˜ï¼Œé‚£ä¹ˆè¿™æ˜¯ç¨³å®šçš„æ’åºç®—æ³• 

  æ’åºå‰ï¼š 5 , 1 , 3 ğ‘ , 4 , 7 , 3ğ‘ 

  ç¨³å®šçš„æ’åºï¼š 1 , 3 ğ‘ , 3 ğ‘ , 4 , 5 , 7

  ä¸ç¨³å®šçš„æ’åºï¼š1 , 3 ğ‘ , 3 ğ‘ , 4, 5 , 7

- å¯¹è‡ªå®šä¹‰å¯¹è±¡è¿›è¡Œæ’åºæ—¶ï¼Œç¨³å®šæ€§ä¼šå½±å“æœ€ç»ˆçš„æ’åºæ•ˆæœ

- å†’æ³¡æ’åºå±äºç¨³å®šçš„æ’åºç®—æ³• 

>  ç¨æœ‰ä¸æ…ï¼Œç¨³å®šçš„æ’åºç®—æ³•ä¹Ÿèƒ½è¢«å†™æˆä¸ç¨³å®šçš„æ’åºç®—æ³•ï¼Œæ¯”å¦‚ä¸‹é¢çš„å†’æ³¡æ’åºä»£ç æ˜¯ä¸ç¨³å®šçš„

```java
for(int end = array.length-1;end > 0; end--){
	for(int begin = 1; begin<end; brgin++){
		if(cmp(begin,begin-1)>=0){
			swap(begin,begin-1);
		}
	}
}
```

#### åŸåœ°ç®—æ³•

> ä½•ä¸ºåŸåœ°ç®—æ³•ï¼Ÿ 

- ä¸ä¾èµ–é¢å¤–çš„èµ„æºæˆ–è€…ä¾èµ–å°‘æ•°çš„é¢å¤–èµ„æºï¼Œä»…ä¾é è¾“å‡ºæ¥è¦†ç›–è¾“å…¥ 
- ç©ºé—´å¤æ‚åº¦ä¸º ğ‘‚ ( 1 ) å¯ä»¥è®¤ä¸ºæ˜¯åŸåœ°ç®—æ³•
- éåŸåœ°ç®—æ³•ï¼Œç§°ä¸º Not-in-place æˆ–è€… Out-of-place
- å†’æ³¡æ’åºå±äº In-place

## é€‰æ‹©æ’åº

1. å¤–å±‚å¾ªç¯æ”¶ç¼©åŒºé—´
2. å†…å­˜å¾ªç¯éå†å½“å‰åŒºé—´
3. æ¯æ¬¡éå†é€‰æ‹©å½“å‰åŒºé—´æœ€å¤§å…ƒç´ ä¸æœ€åå…ƒç´ æ¢ä½

```java
public class SelectionSort extends Sort {

    @Override
    protected void sort() {
        for (int end = array.length - 1; end > 0; end--) {
            int maxIndex = 0;
            for (int begin = 1; begin <= end; begin++) {
                if (cmp(maxIndex, begin) < 0) {
                    maxIndex = begin;
                }
            }
            swap(maxIndex, end);

        }
    }
}
```

|  æœ€å¥½  |  æœ€å  |  å¹³å‡  | é¢å¤–ç©ºé—´å¤æ‚åº¦ | In-place | ç¨³å®šæ€§ |
| :----: | :----: | :----: | :------------: | :------: | :----: |
| O(n^2) | O(n^2) | O(n^2) |      O(1)      |    âˆš     |   âˆš    |

> é€‰æ‹©æ’åºçš„é€‰æœ€å¤§å€¼éƒ¨åˆ†ç»è¿‡ä¼˜åŒ–åå°±å¼•å‡ºäº†å †æ’åº

---

## å †æ’åº

1. å°±åœ°åˆ›å»ºä¸€ä¸ªå¤§é¡¶å †
2. æ ¹æ®å¤§é¡¶å †çš„æ€§è´¨ï¼Œæœ€å¤§å…ƒç´ åœ¨array[0],æ‰€ä»¥æ¯æ¬¡å¾ªç¯äº¤æ¢é¦–å°¾å…ƒç´ ï¼ŒåŒæ—¶å †çš„å¤§å°å‡1ï¼Œæ¢å¤å †çš„æ€§è´¨
3. å½“å †çš„å¤§å°ä¸º1æ—¶å°±å®Œæˆäº†æ’åº

```java
public class HeapSort extends Sort {
    private int heapSize;

    @Override
    protected void sort() {
        heapSize = array.length;
        //åŸåœ°å»ºå †
        for (int i = (heapSize >> 1) - 1; i >= 0; i--) {
            siftDown(i);
        }

        while (heapSize > 1) {
            //äº¤æ¢å †é¡¶å…ƒç´ ä¸å°¾éƒ¨å…ƒç´ 
            swap(0, --heapSize);
            //0ä½ç½®SiftDown
            siftDown(0);
        }


    }

    private void siftDown(int index) {
        int half = heapSize >> 1;
        Integer element = array[index];
        while (index < half) {
            int childIndex = (index << 1) + 1;
            Integer child = array[childIndex];

            int rChildIndex = childIndex + 1;
            if (rChildIndex < heapSize &&
                    cmpElement(array[rChildIndex], child) > 0
            ) {
                child = array[childIndex = rChildIndex];
            }

            if (cmpElement(element, child) > 0) {
                break;
            }
            array[index] = child;
            index = childIndex;
        }
        array[index] = element;
    }
}
```

- å †æ’åºå¹¶ä¸æ˜¯ä¸€ä¸ªç¨³å®šçš„æ’åº

|   æœ€å¥½   |   æœ€å   |   å¹³å‡   | é¢å¤–ç©ºé—´å¤æ‚åº¦ | In-place | ç¨³å®šæ€§ |
| :------: | :------: | :------: | :------------: | :------: | :----: |
| O(nlogn) | O(nlogn) | O(nlogn) |      O(1)      |    âˆš     |   Ã—    |

## æ’å…¥æ’åº

1. ä»æ•°ç»„ä¸‹æ ‡1å¼€å§‹ä¾æ¬¡é€‰æ‹©æ•°ç»„å…ƒç´ ä¸å‰ä¸€ä¸ªå…ƒç´ æ¯”è¾ƒ
2. å¦‚æœå½“å‰ä½ç½®æ— åºï¼Œå°±ä¸å‰ä¸€ä¸ªå…ƒç´ äº¤æ¢ä½ç½®ï¼Œç›´åˆ°æœ‰åº

```Java
public class InsertSort<E extends Comparable<E>> extends Sort<E> {
    @Override
    protected void sort() {
        for (int begin = 1; begin < array.length; begin++) {
            int cur = begin;
            while (cur > 0 && cmp(cur, cur - 1) < 0) {
                swap(cur, cur - 1);
                cur--;
            }
        }
    }
}

```

| æœ€å¥½ |  æœ€å  |  å¹³å‡  | é¢å¤–ç©ºé—´å¤æ‚åº¦ | In-place | ç¨³å®šæ€§ |
| :--: | :----: | :----: | :------------: | :------: | :----: |
| O(n) | O(n^2) | O(n^2) |      O(1)      |    âˆš     |   âˆš    |

> å…³äºæ’å…¥æ’åºéœ€è¦äº†è§£ä¸€ä¸ªæ¦‚å¿µ

#### é€†åºå¯¹

- ä»€ä¹ˆæ˜¯é€†åºå¯¹ï¼Ÿ 

  æ•°ç»„ <2,3,8,6,1> çš„é€†åºå¯¹ä¸ºï¼š<2,1> <3,1> <8,1> <8,6> <6,1>ï¼Œå…±5ä¸ªé€†åºå¯¹

- æ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸é€†åºå¯¹çš„æ•°é‡æˆæ­£æ¯”å…³ç³»ï¼Œé€†åºå¯¹çš„æ•°é‡è¶Šå¤šï¼Œæ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦è¶Šé«˜

- å½“é€†åºå¯¹çš„æ•°é‡æå°‘æ—¶ï¼Œæ’å…¥æ’åºçš„æ•ˆç‡ç‰¹åˆ«é«˜ï¼Œç”šè‡³é€Ÿåº¦æ¯” O(nlog n )çº§åˆ«çš„å¿«é€Ÿæ’åºè¿˜è¦å¿«

- æ•°æ®é‡ä¸æ˜¯ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œæ’å…¥æ’åºçš„æ•ˆç‡ä¹Ÿæ˜¯éå¸¸å¥½çš„

> å¯¹äºäº¤æ¢å…ƒç´ å¯ä»¥è¿›è¡Œå°å°çš„ä¼˜åŒ–

```java
public class InsertSort<E extends Comparable<E>> extends Sort<E> {
    @Override
    protected void sort() {
        for (int begin = 1; begin < array.length; begin++) {
            int cur = begin;
            E e = array[cur];
            while (cur > 0 && cmpElement(e, array[cur-1]) < 0) {
                array[cur] = array[cur - 1];
                cur--;
            }
            array[cur] = e;
        }

    }
}
```

> å¯¹äºæ’å…¥æ’åºï¼Œæ‰¾å‡ºæ’å…¥ä½ç½®çš„ç®—æ³•è¿˜å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹äºŒåˆ†æœç´¢

### äºŒåˆ†æœç´¢

å¦‚ä½•ç¡®å®šä¸€ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Ÿï¼ˆå‡è®¾æ•°ç»„é‡Œé¢å…¨éƒ½æ˜¯æ•´æ•°ï¼‰ å¦‚æœæ˜¯æ— åºæ•°ç»„ï¼Œä»ç¬¬ 0 ä¸ªä½ç½®å¼€å§‹éå†æœç´¢ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n)

| 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 31   | 66   | 17   | 15   | 28   | 20   | 59   | 88   | 45   | 56   |

å¦‚æœæ˜¯æœ‰åºæ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨äºŒåˆ†æœç´¢ï¼Œæœ€åæ—¶é—´å¤æ‚åº¦ï¼š O ( lo g n )

| 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 15   | 17   | 20   | 28   | 31   | 45   | 56   | 59   | 66   | 88   |

å‡è®¾åœ¨ [begin, end) èŒƒå›´å†…æœç´¢æŸä¸ªå…ƒç´  vï¼Œ

- mid == (begin + end) / 2
- å¦‚æœ v < mï¼Œå» [begin, mid) èŒƒå›´å†…äºŒåˆ†æœç´¢
- å¦‚æœ v > mï¼Œå» [mid + 1, end) èŒƒå›´å†…äºŒåˆ†æœç´¢
-  å¦‚æœ v == mï¼Œç›´æ¥è¿”å› mid



>  ç”±æ­¤å¯ä»¥å¾—å‡ºä¸€ä¸ªç”¨äºŒåˆ†æœç´¢ç¡®å®šæ’å…¥ä½ç½®çš„ç®—æ³•

### ä¼˜åŒ–è¿‡çš„æ’å…¥æ’åº

```java
 @Override
    protected void sort() {
        for (int begin = 1; begin < array.length; begin++) {
            insert(begin, search(begin));
        }
    }

    /**
     * æ’å…¥å…ƒç´ 
     * @param begin æºä½ç½®
     * @param dest ç›®æ ‡ä½ç½®
     */
    private void insert(int begin, int dest) {
        int cur = begin;
        E e = array[cur];
        while (cur != dest) {
            array[cur] = array[cur - 1];
            cur--;
        }
        array[dest] = e;
    }

    /**
     * æŸ¥æ‰¾eåœ¨æœ‰åºæ•°ç»„ä¸­æ’å…¥çš„ä½ç½®
     * @return
     */
    private int search(int index) {
        E e = array[index];
        //å·¦é—­å³å¼€
        int begin = 0;
        int end = index;
        while (begin < end) {
            int mid = (begin + end) >> 1;
            if (cmp(array[mid], e) > 0) {
                end = mid;
            } else {
                begin = mid + 1;
            }
        }
        return begin;
    }

```

> å°½ç®¡ä¼˜åŒ–è¿‡äº†æ’å…¥æ—¶çš„æœç´¢ï¼Œä½†æ—¶é—´å¤æ‚åº¦ä»ç„¶æ˜¯O(n^2)ï¼Œå› ä¸ºæ’å…¥æ—¶éœ€è¦ç§»åŠ¨æ’å…¥ä½ç½®ä¹‹ååˆ°æ’å…¥å…ƒç´ æºä½ç½®çš„æ‰€æœ‰å…ƒç´ 

## å½’å¹¶æ’åº

1. å°†æ•°ç»„ä¸æ–­åˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ†ï¼Œç›´åˆ°æ¯ä¸ªåˆ†æ•°ç»„å…ƒç´ åªæœ‰ä¸€ä¸ª
2. å¯¹ç›¸é‚»çš„åˆ†æ•°ç»„è¿›è¡Œåˆå¹¶ï¼Œåˆå¹¶åçš„æ•°ç»„åº”æ˜¯æœ‰åºçš„
3. é‡å¤2ï¼Œç›´åˆ°æ•´ä¸ªæ•°ç»„æœ‰åº

<img src="https://raw.githubusercontent.com/C1EYE/figureBed/main/img/20210518221810.png" alt="image-20210518221810636" style="zoom:33%;" />

- ä¹Ÿå¯ä»¥è¿™ä¹ˆè¯´

1.  ä¸æ–­åœ°å°†å½“å‰åºåˆ—å¹³å‡åˆ†å‰²æˆ2ä¸ªå­åºåˆ— âœ“ ç›´åˆ°ä¸èƒ½å†åˆ†å‰²ï¼ˆåºåˆ—ä¸­åªå‰©1ä¸ªå…ƒç´ ï¼‰ 
2.  ä¸æ–­åœ°å°†2ä¸ªå­åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ‰åºåºåˆ— âœ“ ç›´åˆ°æœ€ç»ˆåªå‰©ä¸‹1ä¸ªæœ‰åºåºåˆ—

```java
@SuppressWarnings({"unchecked"})
public class MergeSort<E extends Comparable<E>> extends Sort<E> {

    private E[] leftArray;

    @Override
    protected void sort() {
        leftArray = (E[]) new Comparable[array.length >> 1];
        sort(0, array.length);
    }

    /**
     * å¯¹[begin,end)èŒƒå›´å†…çš„æ•°æ®è¿›è¡Œå½’å¹¶æ’åº
     * end-beginå°±æ˜¯èŒƒå›´å†…çš„å…ƒç´ ä¸ªæ•°
     *
     * @param begin
     * @param end
     */
    private void sort(int begin, int end) {
      //æ•°ç»„å…ƒç´ ä¸ªæ•°ä¸º1
        if (end - begin < 2) {
            return;
        }
      //åˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«è¿›è¡Œå½’å¹¶æ’åº
        int mid = (begin + end) >> 1;
        sort(begin, mid);
        sort(mid, end);
      //æœ€ååˆå¹¶
        merge(begin, mid, end);
    }

    /**
     * å°† [begin,mid) å’Œ [id,end)èŒƒå›´çš„å…ƒç´ åˆå¹¶ä¸ºä¸€ä¸ªæœ‰åºåºåˆ—
     */
    private void merge(int begin, int mid, int end) {
        //å·¦æ•°ç»„çš„èµ·å§‹
        int li = 0, le = mid - begin;
        //å³æ•°ç»„çš„èµ·å§‹
        int ri = mid, re = end;
        //è¦†ç›–çš„ä½ç½®
        int ai = begin;
        //å¤‡ä»½å·¦æ•°ç»„
        for (int i = li; i < le; i++) {
            leftArray[i] = array[begin + i];
        }

        //å·¦ä¾§æ•°ç»„æ’åºå®Œå°±å¯ä»¥ç»“æŸäº†
        while (li < le) {
            if (ri < re && cmp(array[ri], leftArray[li]) < 0) {
                array[ai++] = array[ri++];
            }else{
                array[ai++] = leftArray[li++];
            }
        }


    }
}

```

> å¯¹äºå½’å¹¶æ’åºè¿™ç±»æœ‰é€’å½’è°ƒç”¨çš„ç®—æ³•å¾ˆéš¾ç›´è§‚çš„çœ‹å‡ºæ—¶é—´å¤æ‚åº¦ï¼Œè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨é€’æ¨æ³•æ¥æ±‚å•¦

### é€’æ¨æ³•æ±‚æ—¶é—´å¤æ‚åº¦

- è¿™é‡Œä»¥å½’å¹¶æ’åºä¸¾ä¾‹

![image-20210518222731444](https://raw.githubusercontent.com/C1EYE/figureBed/main/img/20210518222731.png)

- ç”±äºå½’å¹¶æ’åºæ€»æ˜¯å¹³å‡åˆ†å‰²å­åºåˆ—ï¼Œæ‰€ä»¥æœ€å¥½ã€æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O ( nlo g n ) ï¼Œå±äºç¨³å®šæ’åº

- ä»ä»£ç ä¸­ä¸éš¾çœ‹å‡ºï¼šå½’å¹¶æ’åºçš„ç©ºé—´å¤æ‚åº¦æ˜¯ O n / 2 + lo g n = O ( n ) n / 2 ç”¨äºä¸´æ—¶å­˜æ”¾å·¦ä¾§æ•°ç»„ï¼Œlo g n æ˜¯å› ä¸ºé€’å½’è°ƒç”¨



### å¸¸è§é€’æ¨å¼ä¸å¤æ‚åº¦

<img src="https://raw.githubusercontent.com/C1EYE/figureBed/main/img/20210518224021.png" alt="image-20210518224021431" style="zoom:50%;" />

 

## å¿«é€Ÿæ’åº

1. é€‰æ‹©ä¸€ä¸ªè½´ç‚¹å…ƒç´ 
2. æ ¹æ®è½´ç‚¹å°†æ•°ç»„åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå¤§äºè½´ç‚¹çš„éƒ¨åˆ†å’Œå°äºè½´ç‚¹çš„éƒ¨åˆ†
3. å¯¹äºè¿™ä¸¤éƒ¨åˆ†é‡å¤1ã€2ï¼Œç›´åˆ°ä¸¤éƒ¨åˆ†å…ƒç´ ä¸ªæ•°éƒ½ä¸º1ï¼Œæ’åºå®Œæˆ

- æ ¹æ®è½´ç‚¹åˆ†ä¸ºä¸¤éƒ¨åˆ†

![image-20210519141028131](https://raw.githubusercontent.com/C1EYE/figureBed/main/img/20210519141028.png)

```java
public class QuickSort<E extends Comparable<E>> extends Sort<E> {

    @Override
    protected void sort() {
        sort(0, array.length);
    }

    /**
     * å¯¹[begin,end)èŒƒå›´è¿›è¡Œå¿«æ’
     *
     * @param begin
     * @param end
     */
    private void sort(int begin, int end) {
        if (end - begin < 2) {
            return;
        }
        //ç¡®å®šè½´ç‚¹ä½ç½®
        int mid = pivotIndex(begin, end);
        //å¯¹å­åºåˆ—æ’åº
        sort(begin, mid);
        //æ³¨æ„è¿™é‡Œ
        sort(mid + 1, end);
    }

    private int pivotIndex(int begin, int end) {
        //éšæœºå–è½´ç‚¹
        swap(begin, begin + (int) Math.random() * (end - begin));
        E pivot = array[begin];
        --end;
        while (begin < end) {

            while (begin < end) {
                //å³å…ƒç´ å¤§äºè½´ç‚¹å…ƒç´ 
                if (cmp(pivot, array[end]) < 0) {
                    end--;
                } else {
                    array[begin++] = array[end];
                    break;
                }
            }
            while (begin < end) {
                //å·¦å…ƒç´ å°äºè½´ç‚¹å…ƒç´ 
                if (cmp(pivot, array[begin]) > 0) {
                    begin++;
                } else {
                    array[end--] = array[begin];
                    break;
                }
            }
        }
        array[begin] = pivot;
        return begin;
    }
}
```

|   æœ€å¥½   |  æœ€å  |  å¹³å‡   | é¢å¤–ç©ºé—´å¤æ‚åº¦ | In-place | ç¨³å®šæ€§ |
| :------: | :----: | :-----: | :------------: | :------: | :----: |
| O(nlogn) | O(n^2) | O(logn) |    O(logn)     |    âˆš     |   Ã—    |

- åœ¨è½´ç‚¹å·¦å³å…ƒç´ æ•°é‡æ¯”è¾ƒå‡åŒ€çš„æƒ…å†µä¸‹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€å¥½çš„æƒ…å†µ T n = 2 âˆ— T n / 2 + O n = O ( nlo g n )

- å¦‚æœè½´ç‚¹å·¦å³å…ƒç´ æ•°é‡æåº¦ä¸å‡åŒ€ï¼Œæœ€åæƒ…å†µ T n = T n âˆ’ 1 + O n = O ( n 2 )

> è¿™ä¹ˆå†™åˆ¤æ–­å°±ä¼šå¯¼è‡´åˆ†å‰²éå¸¸ä¸å¹³è¡¡ï¼Œæ—¶é—´å¤æ‚åº¦O(n^2)

```java
 						while (begin < end) {
                //å³å…ƒç´ å¤§äºè½´ç‚¹å…ƒç´ 
                if (cmp(pivot, array[end]) <= 0) {
                    end--;
                } else {
                    array[begin++] = array[end];
                    break;
                }
            }
            while (begin < end) {
                //å·¦å…ƒç´ å°äºè½´ç‚¹å…ƒç´ 
                if (cmp(pivot, array[begin]) >= 0) {
                    begin++;
                } else {
                    array[end--] = array[begin];
                    break;
                }
            }
```



- ä¸ºäº†é™ä½æœ€åæƒ…å†µçš„å‡ºç°æ¦‚ç‡ï¼Œä¸€èˆ¬é‡‡å–çš„åšæ³•æ˜¯ éšæœºé€‰æ‹©è½´ç‚¹å…ƒç´ 



## å¸Œå°”æ’åº

1. å¸Œå°”æ’åºæŠŠåºåˆ—çœ‹ä½œæ˜¯ä¸€ä¸ªçŸ©é˜µï¼Œåˆ†æˆ ğ‘š åˆ—
2. å¯¹æ¯ä¸€åˆ—è¿›è¡Œæ’åºï¼ˆç”¨æ’å…¥æ’åºï¼‰
3. mä»æŸä¸ªæ•´æ•°é€æ¸å‡ä¸º1 
4. å½“ ğ‘š ä¸º1æ—¶ï¼Œæ•´ä¸ªåºåˆ—å°†å®Œå…¨æœ‰åº

- å› æ­¤ï¼Œå¸Œå°”æ’åºä¹Ÿè¢«ç§°ä¸ºé€’å‡å¢é‡æ’åºï¼ˆDiminishing Increment Sortï¼‰

- çŸ©é˜µçš„åˆ—æ•°å–å†³äºæ­¥é•¿åºåˆ—ï¼ˆstep sequenceï¼‰ æ¯”å¦‚ï¼Œå¦‚æœæ­¥é•¿åºåˆ—ä¸º{1,5,19,41,109,...}ï¼Œå°±ä»£è¡¨ä¾æ¬¡åˆ†æˆ109åˆ—ã€41åˆ—ã€19åˆ—ã€5åˆ—ã€1åˆ—è¿›è¡Œæ’åº 
- ä¸åŒçš„æ­¥é•¿åºåˆ—ï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿä¸åŒ

```java
public class ShellSort<E extends Comparable<E>> extends Sort<E> {
    private List<Integer> stepSequence;

    @Override
    protected void sort() {
        stepSequence = shellStepSequence();
        for (Integer step : stepSequence) {
            sort(step);
        }

    }

    /**
     * æ­¥é•¿åºåˆ—è®¡ç®—
     *
     * @return
     */
    private List<Integer> shellStepSequence() {
        List<Integer> stepSequence = new ArrayList<>();
        int step = array.length;
        while ((step >>= 1) > 0) {
            stepSequence.add(step);
        }
        return stepSequence;
    }

    /**
     * åˆ†æˆstepåˆ—è¿›è¡Œæ’åº
     *
     * @param step
     */
    private void sort(int step) {
        for (int col = 0; col < step; col++) {
            for (int begin = col + step; begin < array.length; begin += step) {
                int cur = begin;
                while (cur > col && cmp(cur, cur - step) < 0) {
                    swap(cur, cur - step);
                    cur-=step;
                }
            }
        }
    }
}

```



------

