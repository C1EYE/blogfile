---
title: Operating System
date: 2021-07-09 21:59:32
tags:
- 操作系统
category: - 读书笔记
---

> 虚拟化

<!-- more -->

# 进程(process)

> 操作系统提供的最基本的抽象

- 进程就是运行中的程序

程序本身是没有生命周期的，它只是存在磁盘上的一些指令或者静态数据，操作系统让这些字节运行起来发挥作用。

一个操作系统可能有上百个进程在同时运行，但只有少量物理CPU可用，操作系统通过虚拟化CPU来提供无数个CPU的假象，也就是时分共享技术。

- 时分共享:通过让一个进程只运行一个时间片，然后切换到其它进程。（这会让每个进程运行慢一些）

> 与之相对的有空分共享，也就是资源在空间上划分，磁盘空间就是这样。

进程独享内存和CPU，当然都是虚拟的

## 进程状态

- 运行(running)：进程正在处理利器上运行，执行命令。
- 就绪(ready):：进程已经准备好运行但是由于某种原因，操作系统选择不在此时运行。
- 阻塞(blocked)：进程执行了某种操作，直到发生其他时间才会准备运行。比如磁盘IO或者网络IO时

<img src="/Users/c1eye/Library/Application Support/typora-user-images/image-20210709235014994.png" alt="image-20210709235014994" style="zoom:50%;" />

## 进程的数据结构

当一个进程停止时，它的**寄存器里的信息**将被保存到内存上的一个位置，当操作系统恢复该进程时，将这些值放回寄存器中就可以恢复该进程。这也成为**上下文切换**。

> xv6内核中的上下文信息 

![image-20210709235940006](https://raw.githubusercontent.com/C1EYE/figureBed/main/img/20210709235940.png)

>  如何高效可控的虚拟化CPU?

## 受限直接执行LDE

**进程如何执行受限制的操作？比如磁盘IO**

- 用户模式和内核模式
- 陷阱表

### 进程间切换



## 进程调度



